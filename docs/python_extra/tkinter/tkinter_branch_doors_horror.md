# Ветка B: Пугалка на основе Doors

## Вступление

В этой ветке мы будем строить игру в стиле «Doors» — пугалку, где:

- Игрок переходит из комнаты в комнату
- Каждая комната имеет своё описание
- Иногда случаются **скримеры** — внезапные страшные события (текст меняет цвет, появляется кричащее сообщение и т.д.)

Это просто текстовая версия, без картинок, но очень эффективная для создания атмосферы!

**Главная идея**: каждая комната хранит информацию о себе (описание, опасна ли она), и мы можем добавлять новые комнаты
в список, пока будут составлять историю игрок.

---

## Модуль 0: Основные элементы tkinter

Перед тем как начать ветку B, убедись, что ты прошёл **Модуль 0 из ветки A** (задания 0.1–0.6). Там объясняются базовые
элементы:

- `Tk()` — главное окно
- `Label` — надпись
- `Button` — кнопка
- `Entry` — поле ввода
- `.config()` — изменение свойств элементов
- `Frame` — контейнер для группировки

Если ты уже это знаешь, переходи дальше на **Модуль B**.

---

## Модуль B: Пугалка

### B1. Базовая комната с кнопкой "Дальше"

**Что мы делаем**: создаём окно, в котором описание комнаты выводится в центре, а внизу есть кнопка, чтобы перейти в
следующую комнату.

**Новое понятие: список сцен**

В пугалке комнаты похожи на сцены в новелле. Мы будем хранить их в списке:

```python
rooms = [
	"Комната 1. Ты входишь в пустую комнату.",
	"Комната 2. На полу лежит что-то странное.",
	"Комната 3. На стене надпись кровью."
]
```

**Код:**

```python
import tkinter as tk


root = tk.Tk()
root.title( "Пугалка" )
root.geometry( "600x400" )

# Список описаний комнат
rooms = [
	"Комната 1. Ты входишь в пустую комнату.\nЛампочка мигает над головой.\nПолная тишина.",
	"Комната 2. На полу лежат осколки стекла.\nНа стене кто-то нацарапал что-то.\nЭто выглядит свежим.",
	"Комната 3. Ты слышишь шорох за спиной.\nТы оборачиваешься — никого.\nНо шорох продолжается..."
]

# Переменная, которая отслеживает, в какой комнате мы находимся
current_room = 0

# Надпись для описания комнаты
label = tk.Label( root, text = rooms[current_room], wraplength = 580, justify = "left",
                  bg = "black", fg = "white" )
label.pack( pady = 20 )


# Функция для перехода в следующую комнату
def next_room():
	global current_room
	current_room = current_room + 1

	# Проверяем, не вышли ли мы за границы
	if current_room >= len( rooms ):
		label.config( text = "Ты вышел из здания.\nТвое путешествие закончилось..." )
		button_next.config( state = "disabled" )
	else:
		label.config( text = rooms[current_room] )


# Создаём кнопку
button_next = tk.Button( root, text = "Дальше", command = next_room )
button_next.pack( pady = 10 )

root.mainloop()
```

**Что происходит:**

1. `rooms = [...]` — список описаний комнат.
2. `current_room = 0` — переменная, которая отслеживает текущую комнату.
3. `bg="black", fg="white"` — чёрный фон и белый текст для атмосферы пугалки.
4. При нажатии кнопки увеличиваем `current_room` на 1 и обновляем текст.
5. Когда комнаты кончаются, отключаем кнопку.

**Что попробовать:**

- Добавь свои описания комнат.
- Измени цвета: попробуй `fg="red"` для одной из комнат.
- Добавь счётчик: `"Комната " + str(current_room + 1) + " из " + str(len(rooms))`.

---

### B2. Структура комнаты со свойствами

**Что мы делаем**: каждая комната больше не просто текст, а словарь с несколькими свойствами.

**Новое понятие: словарь свойств**

Вместо простого списка текстов, мы создаём список словарей. Каждый словарь содержит:

- `"text"` — описание комнаты
- `"scary"` — булево значение (True или False): опасна ли эта комната

Например:

```python
rooms = [
	{ "text": "Спокойная комната", "scary": False },
	{ "text": "Страшная комната!", "scary": True }
]
```

**Код:**

```python
import tkinter as tk


root = tk.Tk()
root.title( "Пугалка" )
root.geometry( "600x400" )
root.config( bg = "black" )

# Словарь комнат
# Каждая комната имеет текст и свойство "scary" (опасна ли)
rooms = [
	{ "text": "Комната 1. Ты входишь.\nЛампочка горит.\nВсё спокойно.", "scary": False },
	{ "text": "Комната 2. Тишина...\nМожно только слышать своё дыхание.\nЛампочка мигает.", "scary": False },
	{ "text": "Комната 3. ЧТО-ТО ДВИЖЕТСЯ В УГЛУ!!!\nВНЕЗАПНО СВЕТ ВЫКЛЮЧАЕТСЯ!", "scary": True },
	{ "text": "Комната 4. Свет включилась снова.\nВсё пусто.\nТы видишь кровь на полу.", "scary": False },
	{ "text": "Комната 5. ТЫ НЕ ОДИН В ЭТОМ ДОМЕ", "scary": True }
]

current_room = 0

# Надпись
label = tk.Label( root, text = "", wraplength = 580, justify = "left",
                  bg = "black", fg = "white" )
label.pack( pady = 20 )

# Счётчик комнат
counter_label = tk.Label( root, text = "", bg = "black", fg = "white" )
counter_label.pack()


# Функция для отображения комнаты
def show_room():
	room = rooms[current_room]
	label.config( text = room["text"] )

	# Обновляем счётчик
	counter_label.config( text = f"Комната {current_room + 1} из {len( rooms )}" )

	# Если комната опасна, меняем интерфейс
	if room["scary"]:
		label.config( fg = "red" )
		counter_label.config( fg = "red" )
	else:
		label.config( fg = "white" )
		counter_label.config( fg = "white" )


# Функция для перехода
def next_room():
	global current_room
	current_room = current_room + 1

	if current_room >= len( rooms ):
		label.config( text = "Ты сбежал из дома...", fg = "white" )
		counter_label.config( text = "Конец" )
		button_next.config( state = "disabled" )
	else:
		show_room()


# Кнопка
button_next = tk.Button( root, text = "Дальше", command = next_room )
button_next.pack( pady = 10 )

# Показываем первую комнату
show_room()

root.mainloop()
```

**Что происходит:**

1. `rooms = [...]` — список словарей. Каждый словарь описывает одну комнату.
2. `show_room()` — функция, которая отображает текущую комнату на экране.
3. `if room["scary"]:` — если комната опасна, меняем цвет текста на красный.
4. `f"Комната {current_room + 1} из {len(rooms)}"` — форматированная строка (f-string), которая показывает номер текущей
   комнаты и общее количество.

**Что попробовать:**

- Измени количество комнат.
- Добавь свои комнаты.
- Сделай несколько комнат подряд с `scary: True` для эффекта.
- Измени текст кнопки для страшных комнат: `button_next.config(text="Бежать!")`.

---

### B3. Ученик добавляет свои комнаты

**Задание:**

- Скопируй код из B2.
- Измени список `rooms` полностью на свой.
- Требования:
	- Минимум 8-10 комнат
	- 3-4 страшные комнаты (со `scary: True`)
	- Логичное развитие истории (например: начинаешь в холле, заходишь в разные комнаты, в конце узнаёшь что-то
	  страшное)

**Идеи для историй:**

- Страшный дом с привидениями
- Заброшенная больница
- Подземелье замка
- Старая школа ночью
- Или что-то своё!

**Подсказки:**

- Перед кодом на бумаге напиши краткое описание каждой комнаты.
- Старайся, чтобы страшные комнаты были в разных местах (не все подряд).

---

### B4. Простой скример — внезапный скачок

**Что мы делаем**: в некоторых комнатах случается скример — внезапно появляется страшное сообщение, потом исчезает.

**Новое понятие: `root.after()`**

`root.after(время_в_миллисекундах, функция)` — выполнить функцию через какое-то время.

Например:

```python
def say_hello():
	print( "Привет!" )


root.after( 2000, say_hello )  # Выполнить say_hello через 2 секунды
```

**Простой скример в одной комнате:**

```python
import tkinter as tk
import random


root = tk.Tk()
root.title( "Пугалка" )
root.geometry( "600x400" )
root.config( bg = "black" )

rooms = [
	{ "text"         : "Комната 1. Входишь в коридор.\nОкруженный стены чёрные.\nДвер впереди.", "scary": False,
	  "has_jumpscare": False },
	{ "text"         : "Комната 2. Ты в тёмной комнате.\nМожешь слышать вентилятор.\nОна работает давно.",
	  "scary"        : False, "has_jumpscare": True },
	{ "text"         : "Комната 3. Комната пуста.\nТолько пыль на полу.\nКто-то был здесь давно.", "scary": False,
	  "has_jumpscare": False },
]

current_room = 0

label = tk.Label( root, text = "", wraplength = 580, justify = "left",
                  bg = "black", fg = "white", font = ("Arial", 14) )
label.pack( pady = 30 )


def show_room():
	room = rooms[current_room]
	label.config( text = room["text"], fg = "white" )

	# Если в комнате может быть скример, запускаем его с задержкой
	if room["has_jumpscare"]:
		root.after( 1500, show_jumpscare )  # Показать скример через 1.5 секунды


def show_jumpscare():
	# Сохраняем старый текст
	old_text = label.cget( "text" )

	# Показываем страшное сообщение
	label.config( text = "!!! ПОСМОТРИ НА ПОТОЛОК !!!", fg = "red" )

	# Через 0.8 секунды вернуть старый текст
	root.after( 800, lambda: label.config( text = old_text, fg = "white" ) )


def next_room():
	global current_room
	current_room = current_room + 1

	if current_room >= len( rooms ):
		label.config( text = "Ты вышел из дома." )
		button_next.config( state = "disabled" )
	else:
		show_room()


button_next = tk.Button( root, text = "Дальше", command = next_room )
button_next.pack( pady = 10 )

show_room()

root.mainloop()
```

**Что происходит:**

1. Добавили свойство `"has_jumpscare"` к комнатам — может ли там быть скример.
2. `root.after(1500, show_jumpscare)` — через 1.5 секунды (1500 миллисекунд) показать скример.
3. `label.cget("text")` — получить текущий текст (читать свойство).
4. `lambda: label.config(...)` — встроенная функция для простого действия.

**Что попробовать:**

- Поменяй время в `root.after()` на другое (например, 500 или 3000).
- Измени текст скримера.
- Добавь скримеры в несколько комнат.
- Попробуй поменять не только текст, но и фон: `root.config(bg="red")` в скример-функции.

---

### B5. Случайный скример

**Что мы делаем**: добавляем элемент неожиданности — скример может произойти в любой момент (случайно).

**Новое понятие: `random.random()`**

`random.random()` возвращает случайное число от 0 до 1. Используем его так:

```python
import random


if random.random() < 0.3:  # 30% вероятность
	print( "Произошло!" )
else:
	print( "Не произошло!" )
```

**Код с вероятностным скримером:**

```python
import tkinter as tk
import random


root = tk.Tk()
root.title( "Пугалка" )
root.geometry( "600x400" )
root.config( bg = "black" )

rooms = [
	{ "text": "Комната 1. Ты входишь.\nБольшое пространство.\nСтены белые.", "scary": False },
	{ "text": "Комната 2. Лампочка мигает.\nВ углу что-то чёрное.\nМожет быть, кот?", "scary": False },
	{ "text": "Комната 3. Обычная спальня.\nКровать застелена.\nОкна закрыты.", "scary": False },
	{ "text": "Комната 4. Зеркало на стене.\nТвое отражение...\nСлегка странно выглядит.", "scary": False },
]

current_room = 0

label = tk.Label( root, text = "", wraplength = 580, justify = "left",
                  bg = "black", fg = "white", font = ("Arial", 14) )
label.pack( pady = 30 )

counter_label = tk.Label( root, text = "", bg = "black", fg = "white" )
counter_label.pack()


def show_room():
	room = rooms[current_room]
	label.config( text = room["text"], fg = "white" )
	counter_label.config( text = f"Комната {current_room + 1} из {len( rooms )}" )

	# 25% вероятность скримера в любой комнате
	if random.random() < 0.25:
		root.after( random.randint( 1000, 3000 ), show_jumpscare )  # Скример через 1-3 секунды


def show_jumpscare():
	old_text = label.cget( "text" )
	label.config( text = "!!! ЭТО НЕ КОШКА !!!", fg = "red" )
	root.after( 800, lambda: label.config( text = old_text, fg = "white" ) )


def next_room():
	global current_room
	current_room = current_room + 1

	if current_room >= len( rooms ):
		label.config( text = "Ты убегаешь из дома." )
		counter_label.config( text = "Конец" )
		button_next.config( state = "disabled" )
	else:
		show_room()


button_next = tk.Button( root, text = "Дальше", command = next_room )
button_next.pack( pady = 10 )

show_room()

root.mainloop()
```

**Что новое:**

1. `random.random() < 0.25` — 25% шанс (вероятность 0.25).
2. `random.randint(1000, 3000)` — случайное целое число от 1000 до 3000 (миллисекунды). Скример произойдёт в случайный
   момент от 1 до 3 секунд.

**Что попробовать:**

- Измени вероятность: `0.1` (10%), `0.5` (50%), `1.0` (100% всегда будет скример).
- Добавь разные варианты скримеров, выбирай случайно.
- Сделай так, чтобы скример показывался несколько раз (использовать цикл или несколько вызовов `after`).

---

## Итоговый проект для ветки B

Напиши полную пугалку (8-12 комнат) со следующими требованиями:

- [ ] Минимум 10 комнат с разными описаниями
- [ ] 3-5 комнат со `scary: True` (красный текст)
- [ ] Скримеры (внезапные страшные сообщения):
	- [ ] Минимум 3 разных варианта текста скримера
	- [ ] Случайность (не в каждой комнате, а с вероятностью)
	- [ ] Разное время появления (1-3 секунды)
- [ ] Счётчик комнат (показывает, в какой комнате и сколько всего)
- [ ] Логичное развитие сюжета

**Идеи для сюжета:**

- Побег из особняка с привидениями
- Проход через заброшенную больницу
- Ночь в странном отеле
- Исследование подземелья
- Побег от того, что преследует в доме
- Или что-то своё!

**Советы:**

- Запиши примеры скримеров на листе бумаги перед кодированием.
- Размещай страшные комнаты не подряд, чтобы было больше напряжения.
- Написаннужные истории интереснее, если они развиваются (первые комнаты спокойные, потом случается что-то странное, в
  конце полный ужас или спасение).

---

## Как усложнить (бонус)

Если закончил и хочешь больше:

1. **Несколько концовок**: добавь выбор в последней комнате (спасаешься или нет).
2. **Счётчик здоровья**: показывай счётчик, который уменьшается при каждом скримере.
3. **Звук**: импортируй `winsound` (Windows) или `os` + `afplay` (macOS) и воспроизводи звук при скримере.
4. **Картинки**: используй `PhotoImage` для добавления картинок к комнатам.
5. **Сохранение**: запоминай лучший результат в файл.
